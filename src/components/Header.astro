---
import Navigation from "./Navigation.astro";
---

<header class="sticky top-0 w-full z-50 py-2 px-4 md:py-4 md:px-8">
  <div class="flex items-center justify-between md:justify-center">
    <!-- Mobile menu button (only visible on small screens) -->
    <button
      id="mobile-menu-button"
      class="flex md:hidden items-center justify-center w-10 h-10 rounded-lg bg-black/30 backdrop-blur-md border border-zinc-800/50"
    >
      <svg
        xmlns="https://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="menu-icon"
      >
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
      <svg
        xmlns="https://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="close-icon hidden"
      >
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>

    <!-- Logo/name for mobile (only visible on small screens) -->
    <div class="md:hidden">
      <span class="text-white text-xl font-medium opacity-80">ZVIX</span>
    </div>

    <!-- Spacer for mobile layout balance -->
    <div class="w-10 md:hidden"></div>

    <!-- Desktop navigation (hidden on mobile) -->
    <div class="hidden md:block">
      <Navigation />
    </div>
  </div>

  <!-- Mobile navigation menu (initially hidden) -->
  <div
    id="mobile-nav"
    class="md:hidden mt-4 overflow-hidden h-0 transition-all duration-300"
  >
    <nav
      class="backdrop-blur-md rounded-xl bg-black/20 border border-zinc-800/30 p-4"
    >
      <ul class="flex flex-col items-center space-y-4">
        <li><a href="/" class="mobile-nav-link">Home</a></li>
        <li>
          <a href="/projects" class="mobile-nav-link">Projects</a>
        </li>
        <li>
          <a href="/book-reviews" class="mobile-nav-link">Book Reviews</a>
        </li>
        <li><a href="/blog" class="mobile-nav-link">Blog</a></li>
        <li><a href="/contact" class="mobile-nav-link">Contact</a></li>
      </ul>
    </nav>
  </div>
</header>

<style>
  .mobile-nav-link {
    display: block;
    color: #d4d4d8;
    padding: 0.75rem 1rem;
    border-radius: 0.5rem;
    transition: all 0.3s;
    opacity: 0.8;
    width: 100%;
    text-align: center;
  }

  .mobile-nav-link:hover {
    opacity: 0.9;
    background-color: rgba(113, 113, 122, 0.15);
    text-shadow: 0 0 1px rgba(255, 255, 255, 0.1);
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const menuButton = document.getElementById("mobile-menu-button");
    const mobileNav = document.getElementById("mobile-nav");
    const menuIcon = document.querySelector(".menu-icon");
    const closeIcon = document.querySelector(".close-icon");

    if (menuButton && mobileNav && menuIcon && closeIcon) {
      menuButton.addEventListener("click", () => {
        // Toggle mobile menu
        if (mobileNav.classList.contains("h-0")) {
          // Open menu
          mobileNav.classList.remove("h-0");
          mobileNav.classList.add("h-auto");
          menuIcon.classList.add("hidden");
          closeIcon.classList.remove("hidden");
        } else {
          // Close menu
          mobileNav.classList.add("h-0");
          mobileNav.classList.remove("h-auto");
          menuIcon.classList.remove("hidden");
          closeIcon.classList.add("hidden");
        }
      });

      // Close mobile menu when a link is clicked
      const mobileLinks = document.querySelectorAll(".mobile-nav-link");
      mobileLinks.forEach((link) => {
        link.addEventListener("click", () => {
          mobileNav.classList.add("h-0");
          mobileNav.classList.remove("h-auto");
          menuIcon.classList.remove("hidden");
          closeIcon.classList.add("hidden");
        });
      });
    }
  });
</script>
